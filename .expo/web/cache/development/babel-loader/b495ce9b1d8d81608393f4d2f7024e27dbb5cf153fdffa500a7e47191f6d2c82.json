{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport { Image, Text, Box, VStack, Input, Icon, Center, Button, ScrollView, Pressable } from 'native-base';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport BackgroundImg from \"../assets/Background.png\";\nimport Search from \"../assets/Search.svg\";\nimport { useForegroundPermissions, watchPositionAsync, LocationAccuracy } from 'expo-location';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Loading } from \"../components/Loading\";\nimport { getAddressLocation } from \"../utils/getAddressLocation\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function Region() {\n  var _useForegroundPermiss = useForegroundPermissions(),\n    _useForegroundPermiss2 = _slicedToArray(_useForegroundPermiss, 2),\n    locationForegroundPermission = _useForegroundPermiss2[0],\n    requestLocationForegroundPermission = _useForegroundPermiss2[1];\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoadingLocation = _useState2[0],\n    setIsLoadingLocation = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    currentAddress = _useState4[0],\n    setCurrentAddress = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    inputValue = _useState6[0],\n    setInputValue = _useState6[1];\n  var _useState7 = useState(null),\n    _useState8 = _slicedToArray(_useState7, 2),\n    selectedCity = _useState8[0],\n    setSelectedCity = _useState8[1];\n  useEffect(function () {\n    requestLocationForegroundPermission();\n  }, []);\n  useEffect(function () {\n    if (!(locationForegroundPermission != null && locationForegroundPermission.granted)) {\n      return;\n    }\n    var subscription;\n    watchPositionAsync({\n      accuracy: LocationAccuracy.High,\n      timeInterval: 1000\n    }, function (location) {\n      getAddressLocation(location.coords).then(function (address) {\n        if (address) {\n          setCurrentAddress(address);\n        }\n      }).finally(function () {\n        return setIsLoadingLocation(false);\n      });\n    }).then(function (response) {\n      return subscription = response;\n    });\n    return function () {\n      if (subscription) {\n        subscription.remove();\n      }\n    };\n  }, [locationForegroundPermission]);\n  var handleSearch = function () {\n    var _ref = _asyncToGenerator(function* () {\n      if (inputValue.trim() === '') {\n        return;\n      }\n      var location = yield getAddressLocation({\n        latitude: 0,\n        longitude: 0\n      });\n      if (location) {\n        yield AsyncStorage.setItem('selectedLocation', JSON.stringify(location));\n        setSelectedCity(inputValue);\n        setInputValue('');\n      }\n    });\n    return function handleSearch() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  if (!(locationForegroundPermission != null && locationForegroundPermission.granted)) {\n    return _jsx(Text, {\n      color: \"gray.100\",\n      fontSize: \"lg\",\n      textAlign: \"center\",\n      margin: 24,\n      children: \"To discover all upcoming music events, allow location access. Head to your device settings and grant Luster permission to access your location.\"\n    });\n  }\n  if (isLoadingLocation) {\n    return _jsx(Loading, {});\n  }\n  return _jsx(ScrollView, {\n    contentContainerStyle: {\n      flexGrow: 1\n    },\n    showsHorizontalScrollIndicator: false,\n    children: _jsxs(VStack, {\n      flex: 1,\n      bg: \"gray.700\",\n      px: 22,\n      children: [_jsx(Image, {\n        source: BackgroundImg,\n        alt: \"Music Event Image\",\n        maxW: 428,\n        maxH: 624,\n        resizeMode: \"cover\",\n        position: \"absolute\"\n      }), _jsx(Text, {\n        color: \"gray.100\",\n        fontSize: \"sm\",\n        fontWeight: 400,\n        mt: 20,\n        children: \"Your Location\"\n      }), selectedCity ? _jsx(Center, {\n        children: _jsx(Text, {\n          color: \"gray.100\",\n          fontSize: \"xl\",\n          children: selectedCity\n        })\n      }) : _jsx(Text, {\n        color: \"gray.100\",\n        fontSize: \"lg\",\n        fontWeight: 700,\n        children: currentAddress\n      }), _jsx(Input, {\n        px: 2,\n        h: 14,\n        mt: 8,\n        borderRadius: 8,\n        backgroundColor: \"transparent\",\n        borderWidth: .4,\n        fontSize: \"xs\",\n        fontFamily: \"body\",\n        placeholder: \"Discover nearby events\",\n        color: \"gray.100\",\n        value: inputValue,\n        onChangeText: function onChangeText(text) {\n          return setInputValue(text);\n        },\n        _focus: {\n          borderWidth: 1,\n          borderColor: 'purple.900'\n        },\n        onSubmitEditing: handleSearch,\n        InputRightElement: _jsxs(Box, {\n          mr: 2,\n          mt: -6,\n          children: [\" \", _jsx(Icon, {\n            as: _jsx(Search, {}),\n            onPress: handleSearch\n          })]\n        })\n      }), _jsx(Pressable, {\n        children: _jsx(LinearGradient, {\n          colors: ['#6D50A0', '#E983F7', '#EC84F9', '#F687FF'],\n          locations: [0, 0.85, 0.5, 1],\n          start: [0, 0],\n          end: [1, 0],\n          style: {\n            borderRadius: 8,\n            overflow: 'hidden'\n          },\n          marginTop: 494,\n          children: _jsx(Button, {\n            variant: \"unstyled\",\n            padding: 18,\n            children: _jsx(Text, {\n              color: \"gray.100\",\n              fontWeight: 700,\n              children: \"NEXT\"\n            })\n          })\n        })\n      })]\n    })\n  });\n}","map":{"version":3,"names":["React","useEffect","useState","Image","Text","Box","VStack","Input","Icon","Center","Button","ScrollView","Pressable","LinearGradient","BackgroundImg","Search","useForegroundPermissions","watchPositionAsync","LocationAccuracy","AsyncStorage","Loading","getAddressLocation","jsx","_jsx","jsxs","_jsxs","Region","_useForegroundPermiss","_useForegroundPermiss2","_slicedToArray","locationForegroundPermission","requestLocationForegroundPermission","_useState","_useState2","isLoadingLocation","setIsLoadingLocation","_useState3","_useState4","currentAddress","setCurrentAddress","_useState5","_useState6","inputValue","setInputValue","_useState7","_useState8","selectedCity","setSelectedCity","granted","subscription","accuracy","High","timeInterval","location","coords","then","address","finally","response","remove","handleSearch","_ref","_asyncToGenerator","trim","latitude","longitude","setItem","JSON","stringify","apply","arguments","color","fontSize","textAlign","margin","children","contentContainerStyle","flexGrow","showsHorizontalScrollIndicator","flex","bg","px","source","alt","maxW","maxH","resizeMode","position","fontWeight","mt","h","borderRadius","backgroundColor","borderWidth","fontFamily","placeholder","value","onChangeText","text","_focus","borderColor","onSubmitEditing","InputRightElement","mr","as","onPress","colors","locations","start","end","style","overflow","marginTop","variant","padding"],"sources":["/Users/bellacristsantos/Downloads/codeworks/luster/luster/src/screens/Region.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Image, Text, Box, VStack, Input, Icon, Center, Button, ScrollView, Pressable, IPressableProps} from 'native-base';\nimport { LinearGradient } from 'expo-linear-gradient';\n\n\nimport BackgroundImg from '@assets/Background.png';\nimport Search from '@assets/Search.svg';\n\nimport { useForegroundPermissions, watchPositionAsync, LocationAccuracy, LocationSubscription } from 'expo-location';\n\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\n\nimport { Loading } from '@components/Loading';\nimport { getAddressLocation } from '@utils/getAddressLocation';\n\nexport function Region() {\n  const [locationForegroundPermission, requestLocationForegroundPermission] = useForegroundPermissions();\n  const [isLoadingLocation, setIsLoadingLocation] = useState(true);\n  const [currentAddress, setCurrentAddress] = useState<string | null>(null);\n  const [inputValue, setInputValue] = useState('');\n  const [selectedCity, setSelectedCity] = useState<string | null>(null);\n\n  useEffect(() => {\n    requestLocationForegroundPermission();\n  }, []);\n\n  useEffect(() => {\n    if (!locationForegroundPermission?.granted) {\n      return;\n    }\n\n    let subscription: LocationSubscription;\n    watchPositionAsync({\n      accuracy: LocationAccuracy.High,\n      timeInterval: 1000,\n    }, (location) => {\n      getAddressLocation(location.coords)\n        .then((address) => {\n          if (address) {\n            setCurrentAddress(address);\n          }\n        })\n        .finally(() => setIsLoadingLocation(false));\n    }).then((response) => subscription = response);\n\n    return () => {\n      if (subscription) {\n        subscription.remove();\n      }\n    };\n  }, [locationForegroundPermission]);\n\n  const handleSearch = async () => {\n    if (inputValue.trim() === '') {\n      return;\n    }\n\n    const location = await getAddressLocation({ latitude: 0, longitude: 0 });\n    if (location) {\n      await AsyncStorage.setItem('selectedLocation', JSON.stringify(location));\n      setSelectedCity(inputValue);\n      setInputValue('');\n    }\n  };\n\n\n  if (!locationForegroundPermission?.granted) {\n    return (\n      <Text color='gray.100' fontSize='lg' textAlign='center' margin={24}>\n        To discover all upcoming music events, allow location access. Head to your device settings and grant Luster permission to access your location.\n      </Text>\n    );\n  }\n\n  if (isLoadingLocation) {\n    return <Loading />;\n  }\n\n  return (\n\n    <ScrollView contentContainerStyle={{ flexGrow: 1}} showsHorizontalScrollIndicator={false}>\n\n      <VStack flex={1} bg=\"gray.700\" px={22}>\n      <Image\n        source={BackgroundImg}\n        alt=\"Music Event Image\"\n        maxW={428}\n        maxH={624}\n        resizeMode=\"cover\"\n        position=\"absolute\"\n      />\n\n      <Text color='gray.100' fontSize='sm' fontWeight={400} mt={20} >\n        Your Location\n      </Text>\n      {selectedCity ? (\n        <Center>\n          <Text color='gray.100' fontSize='xl'>{selectedCity}</Text>\n        </Center>\n      ) : (\n        <Text color='gray.100' fontSize='lg' fontWeight={700} >\n          {currentAddress}\n        </Text>\n      )}\n\n\n      <Input\n\n        px={2}\n        h={14}\n        mt={8}\n        borderRadius={8}\n        backgroundColor='transparent'\n        borderWidth={.4}\n        fontSize='xs'\n        fontFamily='body'\n        placeholder='Discover nearby events'\n        color='gray.100'\n        value={inputValue}\n        onChangeText={(text) => setInputValue(text)}\n        _focus={{\n          borderWidth: 1,\n          borderColor: 'purple.900',\n        }}\n        onSubmitEditing={handleSearch}\n        InputRightElement={\n       <Box mr={2} mt={-6} > <Icon as={<Search />} onPress={handleSearch} /></Box>}\n      />\n\n\n      <Pressable>\n        <LinearGradient\n          colors={['#6D50A0', '#E983F7', '#EC84F9', '#F687FF']}\n          locations={[0, 0.85, 0.5, 1]}\n          start={[0, 0]}\n          end={[1, 0]}\n          style={{borderRadius: 8, overflow: 'hidden' }}\n          marginTop={494}\n\n        >\n          <Button\n          variant=\"unstyled\"\n          padding={18}\n          >\n            <Text color=\"gray.100\" fontWeight={700}>\n              NEXT\n            </Text>\n          </Button>\n        </LinearGradient>\n      </Pressable>\n\n\n\n\n    </VStack>\n\n    </ScrollView>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}